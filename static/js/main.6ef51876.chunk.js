(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{162:function(e,t,n){e.exports=n(263)},167:function(e,t,n){},168:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t);var a=n(0),u=n.n(a),c=n(22),o=n.n(c),s=(n(167),n(19));n(168);var l=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),n=t[0],u=t[1];return{value:n,setValue:u,onChange:function(e){u(e.target.value)}}},i=n(38),r=n.n(i),d=n(10);function b(e){return u.a.createElement(d.f,{component:"nav"},u.a.createElement(d.g,null,u.a.createElement(d.h,{component:"div"},e.messages.map(function(e,t){return u.a.createElement(f,{key:t,uuid:e.uuid,text:e.text})}))))}function f(e){return u.a.createElement("div",null,e.uuid,": ",e.text)}var m=function(){for(var e="Global",t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var c=t[n].split("=");"channel"===c[0]&&""!==c[1]&&(e=decodeURI(c[1]))}var o=Object(a.useState)(e),i=Object(s.a)(o,2),f=i[0],m=i[1],g=Object(a.useState)([]),h=Object(s.a)(g,2),p=h[0],v=h[1],w=Object(a.useState)(["user",(new Date).getTime()].join("-")),E=Object(s.a)(w,1)[0],y=l(),x=l();function C(e){if("messageInput"===e.target.id)"Enter"===e.key&&j();else if("channelInput"===e.target.id&&"Enter"===e.key){var t=y.value.trim();if(t){if(f!==t){m(t);var n=window.location.origin+"/ReactHooksChat.PubNub/?channel="+t;window.history.pushState(null,"",n),y.setValue("")}}else if("Global"!==f){m("Global");var a=window.location.origin+"/ReactHooksChat.PubNub/";window.history.pushState(null,"",a),y.setValue("")}}}function j(){if(x.value){var e={text:x.value,uuid:E};new r.a({publishKey:"pub-c-d62180cb-302f-4c84-b05d-6975d2e5634a",subscribeKey:"sub-c-081cd550-75d2-11e9-a9da-06324c5f6dce",uuid:E}).publish({message:e,channel:f}),x.setValue("")}}function O(){var e=window.location.search.substring(1);if(e)for(var t=e.split("&"),n=0;n<t.length;n++){var a=t[n].split("=");"channel"===a[0]&&""!==a[1]&&m(decodeURI(a[1]))}else m("Global")}return Object(a.useEffect)(function(){console.log("setting up pubnub");var e=new r.a({publishKey:"pub-c-d62180cb-302f-4c84-b05d-6975d2e5634a",subscribeKey:"sub-c-081cd550-75d2-11e9-a9da-06324c5f6dce",uuid:E});return e.addListener({status:function(e){"PNConnectedCategory"===e.category&&console.log("Connected to PubNub!")},message:function(e){if(e.message.text){console.log(e.message.text);var t=[];t.push({uuid:e.message.uuid,text:e.message.text}),v(function(e){return e.concat(t)})}}}),e.subscribe({channels:[f]}),e.history({channel:f,count:10,stringifiedTimeToken:!0},function(e,t){for(var n=[],a=0;a<t.messages.length;a++)n.push({uuid:t.messages[a].entry.uuid,text:t.messages[a].entry.text});v(function(e){return e.concat(n)})}),function(){console.log("shutting down pubnub"),e.unsubscribeAll(),v([])}},[f,E]),Object(a.useEffect)(function(){return window.addEventListener("popstate",O),function(){window.removeEventListener("popstate",O)}},[]),u.a.createElement(d.b,null,u.a.createElement(d.d,null,u.a.createElement("div",{className:"top"},u.a.createElement(d.h,{variant:"h4",inline:!0},"PubNub React Chat"),u.a.createElement(d.e,{style:{width:"100px"},className:"channel",id:"channelInput",onKeyDown:C,placeholder:f,onChange:y.onChange,value:y.value})),u.a.createElement("div",null,u.a.createElement(b,{messages:p}))),u.a.createElement(d.c,null,u.a.createElement(d.e,{placeholder:"Enter a message",fullWidth:!0,id:"messageInput",value:x.value,onChange:x.onChange,onKeyDown:C,inputProps:{"aria-label":"Message Field"},autoFocus:!0}),u.a.createElement(d.a,{size:"small",color:"primary",onClick:j},"Submit")))};o.a.render(u.a.createElement(m,null),document.getElementById("root"))}},[[162,1,2]]]);
//# sourceMappingURL=main.6ef51876.chunk.js.map